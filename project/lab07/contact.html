<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Contact</title>
  <link rel="stylesheet" href="/project/style.css">
</head>
<body>
  <header>
    
    <h1>Contact</h1>
    <nav>
      <a href="tierlist.html">Tier list</a>
      <a href="contact.html">Contact</a>
      <a href="/project/final-labs.html">Final-labs</a>
    </nav>
    
  </header>

  <main>
    <h2>Share Your car Opinions!</h2>
   <form id="myform">
        <div>
      <label for="name">Name:</label>
      <input type="text" id="name" name="name" placeholder="Joshua Stone" required>
      </div>
     <div>
      <label for="email">Email:</label>
      <input type="email" id="email" name="email" placeholder="username@gmail.com" required>
        </div>
        <div>
      <label for="favorite">Favorite car brand:</label>
      <input type="text" id="favorite" name="favorite" placeholder="Honda">
        </div>
     <div>
      <p>Do you agree with my ranking?</p>
      <label><input type="radio" name="agree" value="Yes" required> Yes</label>
      <label><input type="radio" name="agree" value="No"> No</label>
     </div>
     <div>
      <label for="subscribe">Subscribe:</label>
      <input type="checkbox" id="subscribe" name="subscribe">
      </div>

     <div>
      <label for="rating">Rate my car ranking </label>
      <select id="rating" name="rating">
        <option value="excellent">Excellent</option>
        <option value="good">Good</option>
        <option value="okay">Okay</option>
        <option value="needs work">Needs work</option>
        <option value="bad">Bad</option>
      </select>
      </div>

      <div>
       <label for="comments">Comments:</label><br>
       <textarea id="comments" name="comments" rows="5" cols="30" placeholder="write something"></textarea>
      </div>

      <input type="submit">
    </form>
  </main>
  <script>
        document.getElementById('myform').addEventListener('submit', function(event) {
            event.preventDefault(); //stop the browser from submitting the form because this script is handling it. 

            //all the following code get the info from the form and puts it in a constant
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const favorite = document.getElementById('favorite').value;
            const rating = document.getElementById('rating').value;
            const agree = document.querySelector('input[name="agree"]:checked').value;
            const subscribe = document.getElementById('subscribe').checked ? 'Yes' : 'No';
            const comments = document.getElementById('comments').value;

            //put all the form info into a one long string
                 const data = `Name: ${name} Email: ${email} Favorite Car Brand: ${favorite} Agrees with ranking: ${agree} Subscribed: ${subscribe} Rating: ${rating} Comments: ${comments}`;
            
            //The remaining code is used to create and download a text file from the browser - see comments after each line
            const blob = new Blob([data], { type: 'text/plain' }); //create a blob object and put all the data in it
            const url = URL.createObjectURL(blob); //create a temp URL to reference the blob
            const a = document.createElement('a'); //dynamically create an anchor tag
            a.href = url; //use the blog URL you generated for the dynamically created anchor tag
            a.download = 'form-data-from-' + name + '.txt'; //create the file name that will be used
            a.click(); //simulate the clicking of the anchor tag your created 
            URL.revokeObjectURL(url); //dump the temporary URL - it's no longer needed. 
        });
    </script>
</body>
</html>